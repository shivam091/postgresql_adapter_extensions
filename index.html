<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-PostgreSQLAdapterExtensions">PostgreSQLAdapterExtensions</h1>

<p>PostgreSQL Adapter Extensions for ActiveRecord.</p>

<p><code>postgresql_adapter_extensions</code> is a Ruby gem that extends the <code>ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</code> to add additional sequence-related methods for managing PostgreSQL sequences in a Rails application.</p>

<p><a href="https://github.com/shivam091/postgresql_adapter_extensions/actions/workflows/main.yml"><img src="https://github.com/shivam091/postgresql_adapter_extensions/actions/workflows/main.yml/badge.svg"></a> <a href="https://badge.fury.io/rb/postgresql_adapter_extensions"><img src="https://badge.fury.io/rb/postgresql_adapter_extensions.svg"></a> <a href="http://rubygems.org/gems/postgresql_adapter_extensions"><img src="https://img.shields.io/gem/dt/postgresql_adapter_extensions.svg"></a> <a href="https://codeclimate.com/github/shivam091/postgresql_adapter_extensions/maintainability"><img src="https://api.codeclimate.com/v1/badges/be55ce822a1f617f6bdd/maintainability"></a> <a href="https://codeclimate.com/github/shivam091/postgresql_adapter_extensions/test_coverage"><img src="https://api.codeclimate.com/v1/badges/be55ce822a1f617f6bdd/test_coverage"></a> <a href="https://github.com/shivam091/postgresql_adapter_extensions/blob/main/LICENSE.md"><img src="https://img.shields.io/badge/License-MIT-blue.svg"></a></p>

<p><a href="https://shivam091.github.io">Harshal V. Ladhe, Master of Computer Science.</a></p>

<h2 id="label-Introduction">Introduction</h2>

<p>This gem provides easy-to-use methods to create, alter, and drop sequences, which can be useful for handling auto-incrementing IDs and other sequence-based logic in your database.</p>

<h2 id="label-Minimum+Requirements">Minimum Requirements</h2>
<ul><li>
<p>Ruby 3.3+ (<a href="https://www.ruby-lang.org/en/downloads/branches/">Download Ruby</a>)</p>
</li><li>
<p>Rails 8.0.0+ (<a href="https://rubygems.org/gems/rails/versions">RubyGems - Rails Versions</a>)</p>
</li><li>
<p>ActiveRecord 8.0.0+ (comes with Rails)</p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<p>To use <code>postgresql_adapter_extensions</code> in your Rails application, add the following line to your Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>postgresql_adapter_extensions</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>And then execute:</p>

<p><code>$ bundle install</code></p>

<p>Or otherwise simply install it yourself as:</p>

<p><code>$ gem install postgresql_adapter_extensions</code></p>

<h2 id="label-Usage">Usage</h2>

<h3 id="label-create_sequence">create_sequence</h3>

<p>The <code>create_sequence</code> method allows you to create a new sequence in your PostgreSQL database with customizable options. A sequence is typically used to auto-generate unique values for primary keys or other incrementing columns.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_sequence'>create_sequence</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Create a sequence with default options:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_sequence'>create_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Create a sequence starting from 1000 with an increment of 5:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_sequence'>create_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>start:</span> <span class='int'>1000</span><span class='comma'>,</span> <span class='label'>increment_by:</span> <span class='int'>5</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Create a cyclic sequence with a maximum value of 5000:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_sequence'>create_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>cycle:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>maxvalue:</span> <span class='int'>5000</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Create a sequence owned by a specific table and column:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_sequence'>create_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>owned_by:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>orders.id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<h3 id="label-alter_sequence">alter_sequence</h3>

<p>The <code>alter_sequence</code> method allows you to modify an existing sequence in your PostgreSQL database. You can change various attributes of the sequence, such as its increment, start value, maximum value, cycle behavior, and ownership.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Modify the increment value of a sequence:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>increment_by:</span> <span class='int'>10</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Restart a sequence at a specific value:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>restart_with:</span> <span class='int'>2000</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Set a minimum and maximum value for a sequence:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>minvalue:</span> <span class='int'>500</span><span class='comma'>,</span> <span class='label'>maxvalue:</span> <span class='int'>10000</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Make a sequence cycle when it reaches the maximum value:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>cycle:</span> <span class='kw'>true</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Remove the cycle behavior from a sequence:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>cycle:</span> <span class='kw'>false</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Change the owner of a sequence to a specific table column:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_alter_sequence'>alter_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>owned_by:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>orders.id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>This method provides flexibility in managing sequences dynamically in your Rails application, ensuring that sequence-related database behavior can be modified as needed.</p>

<h3 id="label-drop_sequence">drop_sequence</h3>

<p>The <code>drop_sequence</code> method allows you to drop an existing sequence from your PostgreSQL database, with options to control its behavior.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_drop_sequence'>drop_sequence</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Drop a sequence without additional options:</strong></p>

<p><code>ruby drop_sequence(:order_id_seq) </code></p>

<p><strong>Drop a sequence if it exists:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_drop_sequence'>drop_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>if_exists:</span> <span class='kw'>true</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Drop a sequence and all dependent objects:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_drop_sequence'>drop_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>drop_behavior:</span> <span class='symbol'>:cascade</span><span class='rparen'>)</span>
</code></pre>

<p><strong>Drop a sequence but prevent deletion if dependencies exist:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_drop_sequence'>drop_sequence</span><span class='lparen'>(</span><span class='symbol'>:order_id_seq</span><span class='comma'>,</span> <span class='label'>drop_behavior:</span> <span class='symbol'>:restrict</span><span class='rparen'>)</span>
</code></pre>

<h2 id="label-PostgreSQL+Setup+for+Contributors">PostgreSQL Setup for Contributors</h2>

<p>If you’re contributing to this gem and need to set up PostgreSQL for local development or testing, you can use the provided setup script. This script will help you create the necessary PostgreSQL user and database for testing.</p>

<h3 id="label-Running+the+Setup+Script">Running the Setup Script</h3>
<ol><li>
<p><strong>Clone the repository</strong> and navigate to the root directory of the gem.</p>
</li><li>
<p>Make sure you have PostgreSQL installed and running on your machine.</p>
</li><li>
<p>Run the script using the following command:</p>
</li></ol>

<p><code>$ ./bin/setup_postgresql.sh</code></p>

<p>By default, the script will use the following values unless environment variables are set:</p>
<ol><li>
<p>Database Name: <code>rails_test</code></p>
</li><li>
<p>Username: <code>rails</code></p>
</li><li>
<p>Password: <code>password</code></p>
</li><li>
<p>If you want to override these defaults, set the environment variables before running the script:</p>
</li></ol>

<p><code>$ POSTGRES_DB=rails_test POSTGRES_USER=rails POSTGRES_PASSWORD=password ./bin/setup_postgresql.sh</code></p>
<ol><li>
<p>The script will:</p>
</li><li>
<p>Check if the specified PostgreSQL user exists, creating it if necessary.</p>
</li><li>
<p>Check if the specified database exists, creating it if necessary.</p>
</li><li>
<p>Grant the required privileges to the user for the database.</p>
</li></ol>

<p><strong><em>Note: This script is only required if you’re contributing to the development of the gem or testing locally. It is not required for end users of the gem.</em></strong></p>

<h2 id="label-Tests">Tests</h2>

<p>The gem includes RSpec tests to verify that the sequence methods behave as expected.</p>

<h3 id="label-Running+the+Tests">Running the Tests</h3>

<p>To run the tests, you need to install the required dependencies first:</p>

<p><code>$ bundle install</code></p>

<p>Then, run the tests with:</p>

<p><code>$ bundle exec rspec</code></p>

<p>The tests are located in the <code>spec/</code> directory and verify the behavior of <code>create_sequence</code>, <code>alter_sequence</code>, and <code>drop_sequence</code> methods.</p>

<h2 id="label-Contributing">Contributing</h2>

<p>Contributions to this project are welcomed! To contribute:</p>
<ol><li>
<p>Fork this repository</p>
</li><li>
<p>Create a new branch (<code>git checkout -b my-new-feature</code>)</p>
</li><li>
<p>Commit your changes (<code>git commit -am &quot;Add some feature&quot;</code>)</p>
</li><li>
<p>Push the changes to your branch (<code>git push origin my-new-feature</code>)</p>
</li><li>
<p>Create new <strong>Pull Request</strong></p>
</li></ol>

<h2 id="label-License">License</h2>

<p>Copyright 2025 <a href="https://shivam091.github.io">Harshal V. LADHE</a>, Released under the <a href="http://opensource.org/licenses/MIT">MIT License</a>.</p>
</div></div>

      <div id="footer">
  Generated on Fri Mar 21 06:17:12 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.7).
</div>

    </div>
  </body>
</html>